# pico-map

Summarizes the size of objects and usage of the flash, data, heap and stack areas for 'raspberry pi pico' in the '*.elf.map' file generated by CMake.
This script is useful to check the resource usage of uf2 file of raspberry pi pico.

I got a hint for this code from adafruit github (https://github.com/adafruit/linker-map-summary)

Requires python 3.2+.



## Use
`python pico-map.py [--code|bss|data|rodata] firmware.elf.map`

## Example Output
* result of `pico-sdk/pico-examples/build/hello_world/usb/hello_usb.elf.map`

```
********** File **********
 Total   code rodata   data    bss    etc FILE
   256      0      0      0      0    256 /tmp/cc1J84Al.o
  4496    400      0      0      0   4096 CMakeFiles/hello_usb.dir/home/lyc/devel/pico-sdk/pico-sdk/src/rp2_common/pico_standard_link/crt0.S.obj
   264     48    184      0      0     32 CMakeFiles/hello_usb.dir/home/lyc/devel/pico-sdk/pico-sdk/src/rp2_common/pico_standard_link/binary_info.c.obj
     8      8      0      0      0      0 /usr/lib/gcc/arm-none-eabi/10.3.1/thumb/v6-m/nofp/crti.o
   184    152      0      4     28      0 /usr/lib/gcc/arm-none-eabi/10.3.1/thumb/v6-m/nofp/crtbegin.o
    42     28     14      0      0      0 CMakeFiles/hello_usb.dir/hello_usb.c.obj
   ...
   ...
    72      0      0     72      0      0 CMakeFiles/hello_usb.dir/home/lyc/devel/pico-sdk/pico-sdk/src/rp2_common/hardware_irq/irq_handler_chain.S.obj
     4      0      0      4      0      0 CMakeFiles/hello_usb.dir/home/lyc/devel/pico-sdk/pico-sdk/src/rp2_common/pico_double/double_aeabi.S.obj
     4      0      0      4      0      0 CMakeFiles/hello_usb.dir/home/lyc/devel/pico-sdk/pico-sdk/src/rp2_common/pico_float/float_aeabi.S.obj
     0      0      0      0      0      0 /usr/lib/gcc/arm-none-eabi/10.3.1/thumb/v6-m/nofp/crtend.o
 29564  19736    824    960   3464   4580 SUMMARY
 Total   code rodata   data    bss    etc FILE
*) In some cases, the values may not match exactly (I've seen the linker miscalculate the '*fill*' size)

********** Memory **********
     FLASH  10000000h ~ 101fffffh  Total   2048KB  Used  21812B  Ratio   1.0%
       RAM  20000000h ~ 2003ffffh  Total    256KB  Used   6472B  Ratio   2.5%
 SCRATCH_X  20040000h ~ 20040fffh  Total      4KB  Used      0B  Ratio   0.0%
 SCRATCH_Y  20041000h ~ 20041fffh  Total      4KB  Used   2048B  Ratio  50.0%

********** Sector **********
     FLASH :          .boot2 10000000h ~ 100000ffh Size    0.2KB (   256B)    1.17%
     FLASH :           .text 10000100h ~ 10004e17h Size   19.3KB ( 19736B)   90.48%
     FLASH :         .rodata 10004e18h ~ 1000514fh Size    0.8KB (   824B)    3.78%
     FLASH :    .binary_info 10005150h ~ 10005173h Size    0.0KB (    36B)    0.17%
     FLASH :    .data(image) 10005174h ~ 10005533h Size    0.9KB (   960B)    4.40%
       RAM :           .data 200000c0h ~ 2000047fh Size    0.9KB (   960B)   14.83%
       RAM :            .bss 20000480h ~ 20001207h Size    3.4KB (  3464B)   53.52%
       RAM :           .heap 20001208h ~ 20001a07h Size      2KB (  2048B)   31.64%
 SCRATCH_Y :    .stack_dummy 20041000h ~ 200417ffh Size      2KB (  2048B)  100.00%
```